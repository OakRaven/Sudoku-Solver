// Generated by CoffeeScript 1.3.3
(function(){this.PuzzleUi=function(){function e(){this.currentlySelectedRow=null,this.currentlySelectedCol=null,this.currentlySelectedCell=null,this.samplePuzzle=[[0,0,0,0,0,0,7,4,0],[0,0,1,0,0,5,3,0,2],[0,3,4,7,0,0,0,5,6],[0,0,7,0,2,0,0,6,0],[0,0,0,9,0,3,0,0,0],[0,1,0,0,4,0,2,0,0],[5,4,0,0,0,7,9,2,0],[1,0,6,3,0,0,5,0,0],[0,7,8,0,0,0,0,0,0]],this.emptyPuzzle=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]}return e.prototype.highlightRow=function(e){return this.currentlySelectedRow&&$(this.currentlySelectedRow).removeClass("highlight"),$(e).addClass("highlight"),this.currentlySelectedRow=e},e.prototype.highlightColumn=function(e){var t;return this.currentlySelectedCol&&$("#grid tr td:nth-child("+this.currentlySelectedCol+")").removeClass("highlight"),t=$(e).index()+1,$("#grid tr td:nth-child("+t+")").addClass("highlight"),this.currentlySelectedCol=t},e.prototype.hideEdit=function(e){var t,n;return t=$(e),n=t.find("input").val(),t.find("span").text(n),$(this.currentlySelectedCell).removeClass("selected-cell")},e.prototype.displayEdit=function(e){return this.currentlySelectedCell&&this.hideEdit(this.currentlySelectedCell),$(e).addClass("selected-cell"),$(e).find("input").select(),this.currentlySelectedCell=e},e.prototype.unhighlight=function(){this.currentlySelectedCell&&this.hideEdit(this.currentlySelectedCell),this.currentlySelectedCol&&$("#grid tr td:nth-child("+this.currentlySelectedCol+")").removeClass("highlight");if(this.currentlySelectedRow)return $(this.currentlySelectedRow).removeClass("highlight")},e.prototype.extractGridValues=function(){var e;return e=[],$.each($("#grid tr"),function(t,n){var r;return r=[],$.each($(n).find("td"),function(e,t){var n;return n=$(t).find("span"),r.push(parseInt(n.text().trim())||0)}),e.push(r)}),e},e.prototype.pushSolution=function(e){return $.each(e,function(t,n){var r;return r=$("#grid tr:nth-child("+(t+1)+")"),$.each(e[t],function(e,t){var n,i,s,o;s=$(r).find("td:nth-child("+(e+1)+")"),i=$(s).find("span"),n=$(s).find("input"),o=i.text();if(o==="")return i.text(t),i.addClass("solved"),n.val(t)})})},e.prototype.presetBoard=function(e){return $.each($("#grid tr"),function(t,n){return $.each($(n).find("td"),function(n,r){var i,s,o;return o=e[t][n],i=$(r).find("input"),s=$(r).find("span"),s.removeClass("solved"),o>0?(i.val(o),s.text(e[t][n])):(i.val(""),s.text(""))})})},e.prototype.initializeBoard=function(){var e=this;return $("#grid").on("mouseenter","tr",function(t){return e.highlightRow($(t.currentTarget))}),$("#grid").on("mouseenter","td",function(t){return e.highlightColumn($(t.currentTarget))}),$("#grid").on("click","td",function(t){return e.displayEdit($(t.currentTarget))}),$("#grid").on("mouseleave","table",function(t){return e.unhighlight()}),$("#grid").on("keypress","input",function(e){var t;t=String.fromCharCode(e.keyCode);if($.inArray(t,["1","2","3","4","5","6","7","8","9"])===-1)return e.preventDefault()}),$("#solve-btn").on("click",function(t){var n,r,i;return t.preventDefault(),n=e.extractGridValues(),i=new SudokuSolver,r=i.solve(n),e.pushSolution(r)}),$("#sample-btn").on("click",function(t){return t.preventDefault(),e.presetBoard(e.samplePuzzle)}),$("#clear-btn").on("click",function(t){return t.preventDefault(),e.presetBoard(e.emptyPuzzle)})},e}()}).call(this);